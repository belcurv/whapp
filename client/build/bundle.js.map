{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/controller.js","src/js/main.js","src/js/model.js","src/js/service.js","src/js/template.js","src/js/util.js","src/js/view.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* controller.js -- connects our model and view */\n/* jshint esversion:6, devel:true */\n\nexport default class Controller {\n    \n    constructor(model, view) {\n        this.model = model;\n        this.view  = view;\n    }\n    \n    \n    render(data) {\n        this.view.render(data);\n        \n    }\n    \n    \n    setView() {\n        console.log('controller setView fired');\n        this.model.getTeamSkills('T3BC1RPPH')\n            .then( data => this.render(data) );\n    }\n    \n}","/* jshint esversion:6, browser:true */\n\nimport Model      from './model';\nimport { $on }    from './util';\nimport View       from './view';\nimport Controller from './controller';\n\nclass App {\n    \n    constructor() {\n        const model = new Model();\n        const view  = new View();\n        \n        this.controller = new Controller(model, view);\n    }\n    \n}\n\nconst app = new App();\n\nconst setView = () => {\n    app.controller.setView();\n};\n\n$on(window, 'load', setView);\n","/* jshint esversion:6, devel:true */\n/*\n   T3BC1RPPH = chingu central\n   T4ZS2DFAA = chingu rhinos\n   T5518TKBR = extemporaneous\n*/\n\nimport { getJSON } from './service';\nimport { makeFormattedSkillsArr, mapSkillCounts } from './util';\n\nexport default class Model {\n    \n    constructor() {\n        \n    }\n    \n    /* fetch user profiles for a given team ID\n    */\n    getProfiles(team) {\n        return getJSON(`/api/team/${team}`)\n            .then( (profiles) => {\n//                console.log('Profiles from model.js', profiles);\n                return profiles;\n            });\n    }\n    \n    \n    /* fetch team skills*/\n    getTeamSkills(team) {\n        return getJSON(`/api/team/${team}`)\n            .then( (profiles) => {\n                let skillsMap = mapSkillCounts(profiles);\n                return makeFormattedSkillsArr(skillsMap);\n            });\n    }\n    \n}\n","/* jshint esversion:6, devel:true, browser:true */\n\n///* a get JSON function using callbacks\n//*/\n//const getJSON = (url, success, error) => {\n//    const xhr = new XMLHttpRequest();\n//    xhr.onreadystatechange = () => {\n//        if (xhr.readyState === 4) {\n//            if (xhr.status === 200) {\n//                success(JSON.parse(xhr.responseText));\n//            } else {\n//                error(xhr.responseText);\n//            }\n//        }\n//    };\n//    xhr.open('GET', url);\n//    xhr.send();\n//};\n\n\n/* a get JSON function using promises\n*/\nconst getJSON = (url) => {\n    const xhr = new XMLHttpRequest();\n    return new Promise( (resolve, reject) => {\n        xhr.onreadystatechange = () => {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(JSON.parse(xhr.responseText));\n                } else {\n                    reject(xhr.responseText);\n                }\n            }\n        };\n        xhr.open('GET', url);\n        xhr.send();\n    });\n};\n\n\nexport { getJSON };\n","/* jshint esversion:6, devel:true */\n\n\n/* utility method for easy templating of repeating html elements\n * such as lists.\n *\n * 'tagged template literals' are strings that are first passed\n * through a custom function which returns the processed string.\n *\n * @params  [array]  literal     [array of all the literal secti\n * @params  [array]  ...cooked   [rest param: all the proccessed expressions]\n * @returns [string]             [the processed string]\n */\nconst html = (literalsArr, ...cooked) => {\n    let result = '';\n\n    cooked.forEach((cook, i) => {\n        let lit = literalsArr[i];\n        if (Array.isArray(cook)) {\n            cook = cook.join('');\n        }\n        result += lit;\n        result += cook;\n    });\n    result += literalsArr[literalsArr.length - 1];\n    return result;\n};\n\n\n/* template that returns a 'tr'\n*/\n//const table_row = (profile) => html `\n//    <tr>\n//        <td>${profile.team_domain}</td>\n//        <td>${profile.user_name}</td>\n//        <td>${(profile.timestamp).slice(3,15)}</td>\n//        <td>${profile.skills.length}</td>\n//        <td>${profile.skills.join(', ')}</td>\n//    </tr>\n//`;\nconst table_row = (skill) => html `\n    <tr>\n        <td>${skill.skill}</td>\n        <td>${skill.count}</td>\n    </tr>\n`;\n\n\n/* template that loops over the array of profiles adding a 'tr' for each\n*/\n//const table_template = (data) => html `\n//    <table class=\"table\">\n//        <thead>\n//            <th>Team</th>\n//            <th>Team Member</th>\n//            <th>Last Updated</th>\n//            <th>Total Skills</th>\n//            <th>Skills</th>\n//        </thead>\n//        <tbody>\n//            ${data.map( profile => table_row(profile) )}\n//        </tbody>\n//    </table>\n//`;\nconst table_template = (data) => html `\n    <table class=\"table\">\n        <thead>\n            <th>Skill</th>\n            <th>Count</th>\n        </thead>\n        <tbody>\n            ${data.map( skill => table_row(skill) )}\n        </tbody>\n    </table>\n`;\n\n\n\n\n//console.log(table_template(temp_data));\n\nexport { table_template };\n","/* library of helper functions */\n/* jshint esversion:6 */\n\n/* register handler to an event emitted by a target */\nconst $on = (target, event, handler) => {\n    return target.addEventListener(event, handler);\n};\n\n/* build map of unique skills and counts\n * \n * @params    [array]   profiles   [array of profile objects]\n * @returns   [object]             [map of unique skills and counts]\n*/\nconst mapSkillCounts = (profiles) => {\n    let skillCounts = {};\n    profiles.forEach( profile => {\n        profile.skills.forEach( skill => {\n            if (skillCounts[skill]) {\n                skillCounts[skill] += 1;\n            } else {\n                skillCounts[skill] = 1;\n            }\n        });\n    });\n    return skillCounts;\n};\n\n\n/* build formatted array of skill & count objects\n * \n * @params    [object]   inputObj   [map of unique skills and counts]\n * @returns   [array]               [array of skill & count objects]\n*/\nconst makeFormattedSkillsArr = (inputObj) => {\n    return Object.keys(inputObj).map( key => {\n        return {\n            skill: key,\n            count: inputObj[key]\n        };\n    });\n};\n\n\nexport { $on, mapSkillCounts, makeFormattedSkillsArr };\n","/* view.js\n   handles rendering and DOM events.\n   uses the template strings, feeds them data, and adds their output\n   to the right DOM elements.\n*/\n/* jshint esversion:6, browser: true */\n\nimport { table_template } from './template';\n\nexport default class View {\n    \n    constructor() {\n        this.el = document.getElementById('target');\n    }\n    \n    render(data) {\n        console.log('data from view', data);\n        this.el.innerHTML = table_template(data);\n    }\n    \n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29udHJvbGxlci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL21vZGVsLmpzIiwic3JjL2pzL3NlcnZpY2UuanMiLCJzcmMvanMvdGVtcGxhdGUuanMiLCJzcmMvanMvdXRpbC5qcyIsInNyYy9qcy92aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztBQ0FBO0FBQ0E7O0lBRXFCLFU7QUFFakIsd0JBQVksS0FBWixFQUFtQixJQUFuQixFQUF5QjtBQUFBOztBQUNyQixhQUFLLEtBQUwsR0FBYSxLQUFiO0FBQ0EsYUFBSyxJQUFMLEdBQWEsSUFBYjtBQUNIOzs7OytCQUdNLEksRUFBTTtBQUNULGlCQUFLLElBQUwsQ0FBVSxNQUFWLENBQWlCLElBQWpCO0FBRUg7OztrQ0FHUztBQUFBOztBQUNOLG9CQUFRLEdBQVIsQ0FBWSwwQkFBWjtBQUNBLGlCQUFLLEtBQUwsQ0FBVyxhQUFYLENBQXlCLFdBQXpCLEVBQ0ssSUFETCxDQUNXO0FBQUEsdUJBQVEsTUFBSyxNQUFMLENBQVksSUFBWixDQUFSO0FBQUEsYUFEWDtBQUVIOzs7Ozs7a0JBbEJnQixVOzs7OztBQ0RyQjs7OztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7OzswSkFMQTs7SUFPTSxHLEdBRUYsZUFBYztBQUFBOztBQUNWLFFBQU0sUUFBUSxxQkFBZDtBQUNBLFFBQU0sT0FBUSxvQkFBZDs7QUFFQSxTQUFLLFVBQUwsR0FBa0IseUJBQWUsS0FBZixFQUFzQixJQUF0QixDQUFsQjtBQUNILEM7O0FBSUwsSUFBTSxNQUFNLElBQUksR0FBSixFQUFaOztBQUVBLElBQU0sVUFBVSxTQUFWLE9BQVUsR0FBTTtBQUNsQixRQUFJLFVBQUosQ0FBZSxPQUFmO0FBQ0gsQ0FGRDs7QUFJQSxlQUFJLE1BQUosRUFBWSxNQUFaLEVBQW9CLE9BQXBCOzs7Ozs7Ozs7cWpCQ3hCQTtBQUNBOzs7Ozs7QUFNQTs7QUFDQTs7OztJQUVxQixLO0FBRWpCLHFCQUFjO0FBQUE7QUFFYjs7QUFFRDs7Ozs7O29DQUVZLEksRUFBTTtBQUNkLG1CQUFPLHFDQUFxQixJQUFyQixFQUNGLElBREUsQ0FDSSxVQUFDLFFBQUQsRUFBYztBQUNqQztBQUNnQix1QkFBTyxRQUFQO0FBQ0gsYUFKRSxDQUFQO0FBS0g7O0FBR0Q7Ozs7c0NBQ2MsSSxFQUFNO0FBQ2hCLG1CQUFPLHFDQUFxQixJQUFyQixFQUNGLElBREUsQ0FDSSxVQUFDLFFBQUQsRUFBYztBQUNqQixvQkFBSSxZQUFZLDBCQUFlLFFBQWYsQ0FBaEI7QUFDQSx1QkFBTyxrQ0FBdUIsU0FBdkIsQ0FBUDtBQUNILGFBSkUsQ0FBUDtBQUtIOzs7Ozs7a0JBeEJnQixLOzs7Ozs7OztBQ1ZyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUEsSUFBTSxVQUFVLFNBQVYsT0FBVSxDQUFDLEdBQUQsRUFBUztBQUNyQixRQUFNLE1BQU0sSUFBSSxjQUFKLEVBQVo7QUFDQSxXQUFPLElBQUksT0FBSixDQUFhLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDckMsWUFBSSxrQkFBSixHQUF5QixZQUFNO0FBQzNCLGdCQUFJLElBQUksVUFBSixLQUFtQixDQUF2QixFQUEwQjtBQUN0QixvQkFBSSxJQUFJLE1BQUosS0FBZSxHQUFuQixFQUF3QjtBQUNwQiw0QkFBUSxLQUFLLEtBQUwsQ0FBVyxJQUFJLFlBQWYsQ0FBUjtBQUNILGlCQUZELE1BRU87QUFDSCwyQkFBTyxJQUFJLFlBQVg7QUFDSDtBQUNKO0FBQ0osU0FSRDtBQVNBLFlBQUksSUFBSixDQUFTLEtBQVQsRUFBZ0IsR0FBaEI7QUFDQSxZQUFJLElBQUo7QUFDSCxLQVpNLENBQVA7QUFhSCxDQWZEOztRQWtCUyxPLEdBQUEsTzs7Ozs7Ozs7Ozs7Ozs7QUN4Q1Q7O0FBR0E7Ozs7Ozs7Ozs7QUFVQSxJQUFNLE9BQU8sU0FBUCxJQUFPLENBQUMsV0FBRCxFQUE0QjtBQUFBLHNDQUFYLE1BQVc7QUFBWCxjQUFXO0FBQUE7O0FBQ3JDLFFBQUksU0FBUyxFQUFiOztBQUVBLFdBQU8sT0FBUCxDQUFlLFVBQUMsSUFBRCxFQUFPLENBQVAsRUFBYTtBQUN4QixZQUFJLE1BQU0sWUFBWSxDQUFaLENBQVY7QUFDQSxZQUFJLE1BQU0sT0FBTixDQUFjLElBQWQsQ0FBSixFQUF5QjtBQUNyQixtQkFBTyxLQUFLLElBQUwsQ0FBVSxFQUFWLENBQVA7QUFDSDtBQUNELGtCQUFVLEdBQVY7QUFDQSxrQkFBVSxJQUFWO0FBQ0gsS0FQRDtBQVFBLGNBQVUsWUFBWSxZQUFZLE1BQVosR0FBcUIsQ0FBakMsQ0FBVjtBQUNBLFdBQU8sTUFBUDtBQUNILENBYkQ7O0FBZ0JBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQU0sWUFBWSxTQUFaLFNBQVksQ0FBQyxLQUFEO0FBQUEsV0FBVyxJQUFYLGtCQUVKLE1BQU0sS0FGRixFQUdKLE1BQU0sS0FIRjtBQUFBLENBQWxCOztBQVFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFNLGlCQUFpQixTQUFqQixjQUFpQixDQUFDLElBQUQ7QUFBQSxXQUFVLElBQVYsbUJBT1QsS0FBSyxHQUFMLENBQVU7QUFBQSxlQUFTLFVBQVUsS0FBVixDQUFUO0FBQUEsS0FBVixDQVBTO0FBQUEsQ0FBdkI7O0FBZUE7O1FBRVMsYyxHQUFBLGM7Ozs7Ozs7O0FDakZUO0FBQ0E7O0FBRUE7QUFDQSxJQUFNLE1BQU0sU0FBTixHQUFNLENBQUMsTUFBRCxFQUFTLEtBQVQsRUFBZ0IsT0FBaEIsRUFBNEI7QUFDcEMsV0FBTyxPQUFPLGdCQUFQLENBQXdCLEtBQXhCLEVBQStCLE9BQS9CLENBQVA7QUFDSCxDQUZEOztBQUlBOzs7OztBQUtBLElBQU0saUJBQWlCLFNBQWpCLGNBQWlCLENBQUMsUUFBRCxFQUFjO0FBQ2pDLFFBQUksY0FBYyxFQUFsQjtBQUNBLGFBQVMsT0FBVCxDQUFrQixtQkFBVztBQUN6QixnQkFBUSxNQUFSLENBQWUsT0FBZixDQUF3QixpQkFBUztBQUM3QixnQkFBSSxZQUFZLEtBQVosQ0FBSixFQUF3QjtBQUNwQiw0QkFBWSxLQUFaLEtBQXNCLENBQXRCO0FBQ0gsYUFGRCxNQUVPO0FBQ0gsNEJBQVksS0FBWixJQUFxQixDQUFyQjtBQUNIO0FBQ0osU0FORDtBQU9ILEtBUkQ7QUFTQSxXQUFPLFdBQVA7QUFDSCxDQVpEOztBQWVBOzs7OztBQUtBLElBQU0seUJBQXlCLFNBQXpCLHNCQUF5QixDQUFDLFFBQUQsRUFBYztBQUN6QyxXQUFPLE9BQU8sSUFBUCxDQUFZLFFBQVosRUFBc0IsR0FBdEIsQ0FBMkIsZUFBTztBQUNyQyxlQUFPO0FBQ0gsbUJBQU8sR0FESjtBQUVILG1CQUFPLFNBQVMsR0FBVDtBQUZKLFNBQVA7QUFJSCxLQUxNLENBQVA7QUFNSCxDQVBEOztRQVVTLEcsR0FBQSxHO1FBQUssYyxHQUFBLGM7UUFBZ0Isc0IsR0FBQSxzQjs7Ozs7Ozs7O3FqQkMzQzlCOzs7OztBQUtBOztBQUVBOzs7O0lBRXFCLEk7QUFFakIsb0JBQWM7QUFBQTs7QUFDVixhQUFLLEVBQUwsR0FBVSxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBVjtBQUNIOzs7OytCQUVNLEksRUFBTTtBQUNULG9CQUFRLEdBQVIsQ0FBWSxnQkFBWixFQUE4QixJQUE5QjtBQUNBLGlCQUFLLEVBQUwsQ0FBUSxTQUFSLEdBQW9CLDhCQUFlLElBQWYsQ0FBcEI7QUFDSDs7Ozs7O2tCQVRnQixJIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIGNvbnRyb2xsZXIuanMgLS0gY29ubmVjdHMgb3VyIG1vZGVsIGFuZCB2aWV3ICovXG4vKiBqc2hpbnQgZXN2ZXJzaW9uOjYsIGRldmVsOnRydWUgKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udHJvbGxlciB7XG4gICAgXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZpZXcpIHtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnZpZXcgID0gdmlldztcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcmVuZGVyKGRhdGEpIHtcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlcihkYXRhKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldFZpZXcoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb250cm9sbGVyIHNldFZpZXcgZmlyZWQnKTtcbiAgICAgICAgdGhpcy5tb2RlbC5nZXRUZWFtU2tpbGxzKCdUM0JDMVJQUEgnKVxuICAgICAgICAgICAgLnRoZW4oIGRhdGEgPT4gdGhpcy5yZW5kZXIoZGF0YSkgKTtcbiAgICB9XG4gICAgXG59IiwiLyoganNoaW50IGVzdmVyc2lvbjo2LCBicm93c2VyOnRydWUgKi9cblxuaW1wb3J0IE1vZGVsICAgICAgZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQgeyAkb24gfSAgICBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IFZpZXcgICAgICAgZnJvbSAnLi92aWV3JztcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5cbmNsYXNzIEFwcCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gbmV3IE1vZGVsKCk7XG4gICAgICAgIGNvbnN0IHZpZXcgID0gbmV3IFZpZXcoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKG1vZGVsLCB2aWV3KTtcbiAgICB9XG4gICAgXG59XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcblxuY29uc3Qgc2V0VmlldyA9ICgpID0+IHtcbiAgICBhcHAuY29udHJvbGxlci5zZXRWaWV3KCk7XG59O1xuXG4kb24od2luZG93LCAnbG9hZCcsIHNldFZpZXcpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2LCBkZXZlbDp0cnVlICovXG4vKlxuICAgVDNCQzFSUFBIID0gY2hpbmd1IGNlbnRyYWxcbiAgIFQ0WlMyREZBQSA9IGNoaW5ndSByaGlub3NcbiAgIFQ1NTE4VEtCUiA9IGV4dGVtcG9yYW5lb3VzXG4qL1xuXG5pbXBvcnQgeyBnZXRKU09OIH0gZnJvbSAnLi9zZXJ2aWNlJztcbmltcG9ydCB7IG1ha2VGb3JtYXR0ZWRTa2lsbHNBcnIsIG1hcFNraWxsQ291bnRzIH0gZnJvbSAnLi91dGlsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kZWwge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgLyogZmV0Y2ggdXNlciBwcm9maWxlcyBmb3IgYSBnaXZlbiB0ZWFtIElEXG4gICAgKi9cbiAgICBnZXRQcm9maWxlcyh0ZWFtKSB7XG4gICAgICAgIHJldHVybiBnZXRKU09OKGAvYXBpL3RlYW0vJHt0ZWFtfWApXG4gICAgICAgICAgICAudGhlbiggKHByb2ZpbGVzKSA9PiB7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUHJvZmlsZXMgZnJvbSBtb2RlbC5qcycsIHByb2ZpbGVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvZmlsZXM7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogZmV0Y2ggdGVhbSBza2lsbHMqL1xuICAgIGdldFRlYW1Ta2lsbHModGVhbSkge1xuICAgICAgICByZXR1cm4gZ2V0SlNPTihgL2FwaS90ZWFtLyR7dGVhbX1gKVxuICAgICAgICAgICAgLnRoZW4oIChwcm9maWxlcykgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBza2lsbHNNYXAgPSBtYXBTa2lsbENvdW50cyhwcm9maWxlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VGb3JtYXR0ZWRTa2lsbHNBcnIoc2tpbGxzTWFwKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBcbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiwgZGV2ZWw6dHJ1ZSwgYnJvd3Nlcjp0cnVlICovXG5cbi8vLyogYSBnZXQgSlNPTiBmdW5jdGlvbiB1c2luZyBjYWxsYmFja3Ncbi8vKi9cbi8vY29uc3QgZ2V0SlNPTiA9ICh1cmwsIHN1Y2Nlc3MsIGVycm9yKSA9PiB7XG4vLyAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbi8vICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4vLyAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4vLyAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbi8vICAgICAgICAgICAgICAgIHN1Y2Nlc3MoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7XG4vLyAgICAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICAgICBlcnJvcih4aHIucmVzcG9uc2VUZXh0KTtcbi8vICAgICAgICAgICAgfVxuLy8gICAgICAgIH1cbi8vICAgIH07XG4vLyAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbi8vICAgIHhoci5zZW5kKCk7XG4vL307XG5cblxuLyogYSBnZXQgSlNPTiBmdW5jdGlvbiB1c2luZyBwcm9taXNlc1xuKi9cbmNvbnN0IGdldEpTT04gPSAodXJsKSA9PiB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgfSk7XG59O1xuXG5cbmV4cG9ydCB7IGdldEpTT04gfTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiwgZGV2ZWw6dHJ1ZSAqL1xuXG5cbi8qIHV0aWxpdHkgbWV0aG9kIGZvciBlYXN5IHRlbXBsYXRpbmcgb2YgcmVwZWF0aW5nIGh0bWwgZWxlbWVudHNcbiAqIHN1Y2ggYXMgbGlzdHMuXG4gKlxuICogJ3RhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFscycgYXJlIHN0cmluZ3MgdGhhdCBhcmUgZmlyc3QgcGFzc2VkXG4gKiB0aHJvdWdoIGEgY3VzdG9tIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHByb2Nlc3NlZCBzdHJpbmcuXG4gKlxuICogQHBhcmFtcyAgW2FycmF5XSAgbGl0ZXJhbCAgICAgW2FycmF5IG9mIGFsbCB0aGUgbGl0ZXJhbCBzZWN0aVxuICogQHBhcmFtcyAgW2FycmF5XSAgLi4uY29va2VkICAgW3Jlc3QgcGFyYW06IGFsbCB0aGUgcHJvY2Nlc3NlZCBleHByZXNzaW9uc11cbiAqIEByZXR1cm5zIFtzdHJpbmddICAgICAgICAgICAgIFt0aGUgcHJvY2Vzc2VkIHN0cmluZ11cbiAqL1xuY29uc3QgaHRtbCA9IChsaXRlcmFsc0FyciwgLi4uY29va2VkKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuXG4gICAgY29va2VkLmZvckVhY2goKGNvb2ssIGkpID0+IHtcbiAgICAgICAgbGV0IGxpdCA9IGxpdGVyYWxzQXJyW2ldO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb29rKSkge1xuICAgICAgICAgICAgY29vayA9IGNvb2suam9pbignJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IGxpdDtcbiAgICAgICAgcmVzdWx0ICs9IGNvb2s7XG4gICAgfSk7XG4gICAgcmVzdWx0ICs9IGxpdGVyYWxzQXJyW2xpdGVyYWxzQXJyLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG5cbi8qIHRlbXBsYXRlIHRoYXQgcmV0dXJucyBhICd0cidcbiovXG4vL2NvbnN0IHRhYmxlX3JvdyA9IChwcm9maWxlKSA9PiBodG1sIGBcbi8vICAgIDx0cj5cbi8vICAgICAgICA8dGQ+JHtwcm9maWxlLnRlYW1fZG9tYWlufTwvdGQ+XG4vLyAgICAgICAgPHRkPiR7cHJvZmlsZS51c2VyX25hbWV9PC90ZD5cbi8vICAgICAgICA8dGQ+JHsocHJvZmlsZS50aW1lc3RhbXApLnNsaWNlKDMsMTUpfTwvdGQ+XG4vLyAgICAgICAgPHRkPiR7cHJvZmlsZS5za2lsbHMubGVuZ3RofTwvdGQ+XG4vLyAgICAgICAgPHRkPiR7cHJvZmlsZS5za2lsbHMuam9pbignLCAnKX08L3RkPlxuLy8gICAgPC90cj5cbi8vYDtcbmNvbnN0IHRhYmxlX3JvdyA9IChza2lsbCkgPT4gaHRtbCBgXG4gICAgPHRyPlxuICAgICAgICA8dGQ+JHtza2lsbC5za2lsbH08L3RkPlxuICAgICAgICA8dGQ+JHtza2lsbC5jb3VudH08L3RkPlxuICAgIDwvdHI+XG5gO1xuXG5cbi8qIHRlbXBsYXRlIHRoYXQgbG9vcHMgb3ZlciB0aGUgYXJyYXkgb2YgcHJvZmlsZXMgYWRkaW5nIGEgJ3RyJyBmb3IgZWFjaFxuKi9cbi8vY29uc3QgdGFibGVfdGVtcGxhdGUgPSAoZGF0YSkgPT4gaHRtbCBgXG4vLyAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZVwiPlxuLy8gICAgICAgIDx0aGVhZD5cbi8vICAgICAgICAgICAgPHRoPlRlYW08L3RoPlxuLy8gICAgICAgICAgICA8dGg+VGVhbSBNZW1iZXI8L3RoPlxuLy8gICAgICAgICAgICA8dGg+TGFzdCBVcGRhdGVkPC90aD5cbi8vICAgICAgICAgICAgPHRoPlRvdGFsIFNraWxsczwvdGg+XG4vLyAgICAgICAgICAgIDx0aD5Ta2lsbHM8L3RoPlxuLy8gICAgICAgIDwvdGhlYWQ+XG4vLyAgICAgICAgPHRib2R5PlxuLy8gICAgICAgICAgICAke2RhdGEubWFwKCBwcm9maWxlID0+IHRhYmxlX3Jvdyhwcm9maWxlKSApfVxuLy8gICAgICAgIDwvdGJvZHk+XG4vLyAgICA8L3RhYmxlPlxuLy9gO1xuY29uc3QgdGFibGVfdGVtcGxhdGUgPSAoZGF0YSkgPT4gaHRtbCBgXG4gICAgPHRhYmxlIGNsYXNzPVwidGFibGVcIj5cbiAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgPHRoPlNraWxsPC90aD5cbiAgICAgICAgICAgIDx0aD5Db3VudDwvdGg+XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICR7ZGF0YS5tYXAoIHNraWxsID0+IHRhYmxlX3Jvdyhza2lsbCkgKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICA8L3RhYmxlPlxuYDtcblxuXG5cblxuLy9jb25zb2xlLmxvZyh0YWJsZV90ZW1wbGF0ZSh0ZW1wX2RhdGEpKTtcblxuZXhwb3J0IHsgdGFibGVfdGVtcGxhdGUgfTtcbiIsIi8qIGxpYnJhcnkgb2YgaGVscGVyIGZ1bmN0aW9ucyAqL1xuLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG5cbi8qIHJlZ2lzdGVyIGhhbmRsZXIgdG8gYW4gZXZlbnQgZW1pdHRlZCBieSBhIHRhcmdldCAqL1xuY29uc3QgJG9uID0gKHRhcmdldCwgZXZlbnQsIGhhbmRsZXIpID0+IHtcbiAgICByZXR1cm4gdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIpO1xufTtcblxuLyogYnVpbGQgbWFwIG9mIHVuaXF1ZSBza2lsbHMgYW5kIGNvdW50c1xuICogXG4gKiBAcGFyYW1zICAgIFthcnJheV0gICBwcm9maWxlcyAgIFthcnJheSBvZiBwcm9maWxlIG9iamVjdHNdXG4gKiBAcmV0dXJucyAgIFtvYmplY3RdICAgICAgICAgICAgIFttYXAgb2YgdW5pcXVlIHNraWxscyBhbmQgY291bnRzXVxuKi9cbmNvbnN0IG1hcFNraWxsQ291bnRzID0gKHByb2ZpbGVzKSA9PiB7XG4gICAgbGV0IHNraWxsQ291bnRzID0ge307XG4gICAgcHJvZmlsZXMuZm9yRWFjaCggcHJvZmlsZSA9PiB7XG4gICAgICAgIHByb2ZpbGUuc2tpbGxzLmZvckVhY2goIHNraWxsID0+IHtcbiAgICAgICAgICAgIGlmIChza2lsbENvdW50c1tza2lsbF0pIHtcbiAgICAgICAgICAgICAgICBza2lsbENvdW50c1tza2lsbF0gKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2tpbGxDb3VudHNbc2tpbGxdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNraWxsQ291bnRzO1xufTtcblxuXG4vKiBidWlsZCBmb3JtYXR0ZWQgYXJyYXkgb2Ygc2tpbGwgJiBjb3VudCBvYmplY3RzXG4gKiBcbiAqIEBwYXJhbXMgICAgW29iamVjdF0gICBpbnB1dE9iaiAgIFttYXAgb2YgdW5pcXVlIHNraWxscyBhbmQgY291bnRzXVxuICogQHJldHVybnMgICBbYXJyYXldICAgICAgICAgICAgICAgW2FycmF5IG9mIHNraWxsICYgY291bnQgb2JqZWN0c11cbiovXG5jb25zdCBtYWtlRm9ybWF0dGVkU2tpbGxzQXJyID0gKGlucHV0T2JqKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGlucHV0T2JqKS5tYXAoIGtleSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBza2lsbDoga2V5LFxuICAgICAgICAgICAgY291bnQ6IGlucHV0T2JqW2tleV1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG5cblxuZXhwb3J0IHsgJG9uLCBtYXBTa2lsbENvdW50cywgbWFrZUZvcm1hdHRlZFNraWxsc0FyciB9O1xuIiwiLyogdmlldy5qc1xuICAgaGFuZGxlcyByZW5kZXJpbmcgYW5kIERPTSBldmVudHMuXG4gICB1c2VzIHRoZSB0ZW1wbGF0ZSBzdHJpbmdzLCBmZWVkcyB0aGVtIGRhdGEsIGFuZCBhZGRzIHRoZWlyIG91dHB1dFxuICAgdG8gdGhlIHJpZ2h0IERPTSBlbGVtZW50cy5cbiovXG4vKiBqc2hpbnQgZXN2ZXJzaW9uOjYsIGJyb3dzZXI6IHRydWUgKi9cblxuaW1wb3J0IHsgdGFibGVfdGVtcGxhdGUgfSBmcm9tICcuL3RlbXBsYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFyZ2V0Jyk7XG4gICAgfVxuICAgIFxuICAgIHJlbmRlcihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdkYXRhIGZyb20gdmlldycsIGRhdGEpO1xuICAgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHRhYmxlX3RlbXBsYXRlKGRhdGEpO1xuICAgIH1cbiAgICBcbn1cbiJdfQ=="}